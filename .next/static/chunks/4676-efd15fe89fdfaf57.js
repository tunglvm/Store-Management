"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4676],{4964:(e,s,r)=>{r.d(s,{Xi:()=>c,av:()=>o,j7:()=>n,tU:()=>l});var t=r(5155);r(2115);var a=r(64),i=r(3999);function l(e){let{className:s,...r}=e;return(0,t.jsx)(a.bL,{"data-slot":"tabs",className:(0,i.cn)("flex flex-col gap-2",s),...r})}function n(e){let{className:s,...r}=e;return(0,t.jsx)(a.B8,{"data-slot":"tabs-list",className:(0,i.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...r})}function c(e){let{className:s,...r}=e;return(0,t.jsx)(a.l9,{"data-slot":"tabs-trigger",className:(0,i.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r})}function o(e){let{className:s,...r}=e;return(0,t.jsx)(a.UC,{"data-slot":"tabs-content",className:(0,i.cn)("flex-1 outline-none",s),...r})}},8745:(e,s,r)=>{r.d(s,{i:()=>u});var t=r(5155),a=r(2115),i=r(4736),l=r(1886),n=r(6671);let c=r(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function o(e){if(!e)return"/placeholder-h7ony.png";if("string"==typeof e)return e.startsWith("http://")||e.startsWith("https://")?e:"".concat(c,"/api/files/").concat(e);let s=(null==e?void 0:e.$oid)||(null==e?void 0:e._id)||(null==e?void 0:e.id);return s?"".concat(c,"/api/files/").concat(s):"/placeholder-h7ony.png"}function d(e){if(!e)return"";if("string"==typeof e)return e;if("object"==typeof e){if("string"==typeof e.$oid)return e.$oid;if("string"==typeof e._id)return e._id;if(e._id&&"object"==typeof e._id&&"string"==typeof e._id.$oid)return e._id.$oid;if("string"==typeof e.id)return e.id}return""}function u(e){let{currentProductId:s,category:r,useSourceCodeApi:c=!1}=e,[u,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{if(x(!0),c){let e=await l.d3.getAll(1,20,void 0,void 0,void 0,!0);if(e.success&&e.data){let r=e.data,t=((Array.isArray(r)?r:r.data||r.items||[])||[]).filter(e=>d(e._id)!==s).slice(0,4).map(e=>{var s;let r=d(e._id);return{id:r,title:e.name,description:(null===(s=e.description)||void 0===s?void 0:s[0])||"Kh\xf4ng c\xf3 m\xf4 tả",price:e.discountedPrice||e.price,originalPrice:(e.discountPercent||0)>0?e.price:void 0,category:"Source Code",image:o(e.thumbnailImage)||"/placeholder-h7ony.png",seller:"ZuneF Store",isHot:(e.discountPercent||0)>0,href:"/product/".concat(r)}});m(t)}else m([])}else{let e=await l.iw.getAll();if(e.success&&e.data){let t=[];Array.isArray(e.data)?t=e.data:e.data.accounts&&Array.isArray(e.data.accounts)?t=e.data.accounts:e.data.items&&Array.isArray(e.data.items)&&(t=e.data.items);let a=t.filter(e=>{var t;return d(e._id)!==s&&((null===(t=e.category)||void 0===t?void 0:t.includes(r))||!0)}).slice(0,4).map(e=>{var s,r;let t=d(e._id);return{id:t,title:e.name,description:(null===(s=e.description)||void 0===s?void 0:s[0])||"Kh\xf4ng c\xf3 m\xf4 tả",price:e.price,originalPrice:(e.Discount||0)>0?Math.round(e.price/(1-e.Discount/100)):void 0,category:(null===(r=e.category)||void 0===r?void 0:r[0])||"Kh\xe1c",image:o(e.thumbnail)||"/placeholder-h7ony.png",seller:"ZuneF Store",isHot:(e.Discount||0)>0,href:"/ai-accounts/".concat(t)}});if(a.length<4){let e=t.filter(e=>{var t;return d(e._id)!==s&&!(null===(t=e.category)||void 0===t?void 0:t.includes(r))}).slice(0,4-a.length).map(e=>{var s,r;let t=d(e._id);return{id:t,title:e.name,description:(null===(s=e.description)||void 0===s?void 0:s[0])||"Kh\xf4ng c\xf3 m\xf4 tả",price:e.price,originalPrice:(e.Discount||0)>0?Math.round(e.price/(1-e.Discount/100)):void 0,category:(null===(r=e.category)||void 0===r?void 0:r[0])||"Kh\xe1c",image:o(e.thumbnail)||"/placeholder-h7ony.png",seller:"ZuneF Store",isHot:(e.Discount||0)>0,href:"/ai-accounts/".concat(t)}});a.push(...e)}m(a)}else m([])}}catch(e){console.error("Error fetching related products:",e),n.oR.error("Kh\xf4ng thể tải sản phẩm li\xean quan"),m([])}finally{x(!1)}})()},[s,r,c]),h)?(0,t.jsxs)("section",{className:"py-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Sản phẩm li\xean quan"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Những sản phẩm tương tự bạn c\xf3 thể quan t\xe2m"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-48 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},e))})]}):0===u.length?null:(0,t.jsxs)("section",{className:"py-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Sản phẩm li\xean quan"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Những sản phẩm tương tự bạn c\xf3 thể quan t\xe2m"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(e=>(0,t.jsx)(i.A,{...e},e.id))})]})}},9886:(e,s,r)=>{r.d(s,{J:()=>A});var t=r(5155),a=r(2115),i=r(7168),l=r(8145),n=r(8482),c=r(4964),o=r(5414);function d(e){let{...s}=e;return(0,t.jsx)(o.b,{"data-slot":"aspect-ratio",...s})}var u=r(7655),m=r(3999);function h(e){let{className:s,children:r,...a}=e;return(0,t.jsxs)(u.bL,{"data-slot":"scroll-area",className:(0,m.cn)("relative",s),...a,children:[(0,t.jsx)(u.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),(0,t.jsx)(x,{}),(0,t.jsx)(u.OK,{})]})}function x(e){let{className:s,orientation:r="vertical",...a}=e;return(0,t.jsx)(u.VM,{"data-slot":"scroll-area-scrollbar",orientation:r,className:(0,m.cn)("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",s),...a,children:(0,t.jsx)(u.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var g=r(2355),p=r(3052),f=r(7809),v=r(1976),j=r(6516),b=r(5525),N=r(9799),y=r(133),w=r(3786);function A(e){let{product:s,hideMeta:r=!1}=e,[o,u]=(0,a.useState)(0),[m,x]=(0,a.useState)(1),[A,k]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[P,E]=(0,a.useState)([]),C=(0,a.useRef)(null),T=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0,z=Array.isArray(s.policy)&&s.policy.length>0,M=Array.isArray(s.videoPreview)&&s.videoPreview.length>0,$=Array.isArray(s.videoTutorial)&&s.videoTutorial.length>0,D=M||$,L=+!!D;return(0,a.useEffect)(()=>{let e=C.current;if(!e)return;let s=Array.from(e.querySelectorAll("h2, h3")),r=e=>e.toLowerCase().normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-"),t=[];s.forEach(e=>{var s;let a=(null===(s=e.textContent)||void 0===s?void 0:s.trim())||"";if(!a)return;let i=e.id||r(a);e.id=i,t.push({id:i,text:a,level:"h3"===e.tagName.toLowerCase()?3:2})}),E(t)},[s.fullDescription]),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative aspect-square bg-muted rounded-lg overflow-hidden",children:[(0,t.jsx)("img",{src:s.images[o]||"/placeholder.svg",alt:s.title,className:"w-full h-full object-cover"}),s.images.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.$,{variant:"outline",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-background/80 backdrop-blur-sm",onClick:()=>{u(e=>(e-1+s.images.length)%s.images.length)},children:(0,t.jsx)(g.A,{className:"h-4 w-4"})}),(0,t.jsx)(i.$,{variant:"outline",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-background/80 backdrop-blur-sm",onClick:()=>{u(e=>(e+1)%s.images.length)},children:(0,t.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[s.isHot&&(0,t.jsx)(l.E,{variant:"destructive",children:"HOT"}),T>0&&(0,t.jsxs)(l.E,{variant:"secondary",className:"bg-primary text-primary-foreground",children:["-",T,"%"]})]})]}),s.images.length>1&&(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto",children:s.images.map((e,r)=>(0,t.jsx)("button",{onClick:()=>u(r),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors ".concat(r===o?"border-primary":"border-border"),children:(0,t.jsx)("img",{src:e||"/placeholder.svg",alt:"".concat(s.title," ").concat(r+1),className:"w-full h-full object-cover"})},r))})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(()=>{let e=Array.from(new Set(s.tags||[])),r=!!s.category&&!e.includes(s.category);return(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(l.E,{variant:"outline",children:s.category}),e.map(e=>(0,t.jsx)(l.E,{variant:"secondary",className:"text-xs",children:e},e))]})})()}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-4",children:s.title}),!r&&(0,t.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:s.inStock?(0,t.jsxs)("span",{className:"text-green-600",children:["C\xf2n ",s.stockCount," sản phẩm"]}):(0,t.jsx)("span",{className:"text-red-600",children:"Hết h\xe0ng"})})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsxs)("span",{className:"text-3xl font-bold text-primary",children:[s.price.toLocaleString("vi-VN"),"đ"]}),s.originalPrice&&(0,t.jsxs)("span",{className:"text-xl text-muted-foreground line-through",children:[s.originalPrice.toLocaleString("vi-VN"),"đ"]})]}),(0,t.jsx)("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)(i.$,{size:"lg",className:"flex-1",disabled:!s.inStock,children:[(0,t.jsx)(f.A,{className:"h-5 w-5 mr-2"}),"Mua ngay"]}),(0,t.jsx)(i.$,{variant:"outline",size:"lg",onClick:()=>k(!A),className:A?"text-red-500 border-red-500":"",children:(0,t.jsx)(v.A,{className:"h-5 w-5 ".concat(A?"fill-current":"")})}),(0,t.jsx)(i.$,{variant:"outline",size:"lg",children:(0,t.jsx)(j.A,{className:"h-5 w-5"})})]}),z&&(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-6 text-sm text-muted-foreground",children:s.policy.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[0===s&&(0,t.jsx)(b.A,{className:"h-4 w-4"}),1===s&&(0,t.jsx)(N.A,{className:"h-4 w-4"}),2===s&&(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e})]},s))})]})]}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsxs)(c.tU,{defaultValue:"description",className:"w-full",children:[(0,t.jsxs)(c.j7,{className:"grid w-full ".concat(3===2+L?"grid-cols-3":"grid-cols-2"),children:[(0,t.jsx)(c.Xi,{value:"description",children:"M\xf4 tả chi tiết"}),(0,t.jsx)(c.Xi,{value:"specifications",children:"Th\xf4ng số"}),D&&(0,t.jsx)(c.Xi,{value:"video",children:"Video"})]}),(0,t.jsx)(c.av,{value:"description",className:"mt-6",children:(0,t.jsx)(n.Zp,{children:(0,t.jsxs)(n.Wu,{className:"p-6",children:[P.length>0&&(0,t.jsxs)("div",{className:"mb-6 rounded-lg border bg-muted/30 p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold mb-3",children:"Mục lục"}),(0,t.jsx)("nav",{className:"flex flex-wrap gap-3",children:P.map(e=>(0,t.jsx)("a",{href:"#".concat(e.id),className:"text-xs px-2 py-1 rounded-md border hover:bg-accent transition ".concat(3===e.level?"opacity-80":""),children:e.text},e.id))})]}),(0,t.jsxs)("div",{className:_?"prose prose-sm max-w-none prose-headings:text-foreground prose-a:text-primary hover:prose-a:underline prose-strong:text-foreground prose-li:marker:text-muted-foreground prose-img:rounded-lg prose-pre:bg-muted":"prose prose-sm max-w-none max-h-72 overflow-hidden relative prose-headings:text-foreground prose-a:text-primary hover:prose-a:underline prose-strong:text-foreground prose-li:marker:text-muted-foreground prose-img:rounded-lg prose-pre:bg-muted",children:[(0,t.jsx)("div",{ref:C,dangerouslySetInnerHTML:{__html:s.fullDescription}}),!_&&(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t from-background to-transparent pointer-events-none"})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>S(!_),children:_?"Thu gọn":"Xem th\xeam"})})]})})}),(0,t.jsx)(c.av,{value:"specifications",className:"mt-6",children:(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-6",children:(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(s.specifications).filter(e=>{let[s]=e;return!/lượt\s*tải/i.test(s)&&!/downloads?/i.test(s)&&!/\bluot\s*tai\b/i.test(s)}).map(e=>{let[s,r]=e;return(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-border last:border-0",children:[(0,t.jsx)("span",{className:"font-medium",children:s}),(0,t.jsx)("span",{className:"text-muted-foreground",children:r})]},s)})})})})}),D&&(0,t.jsx)(c.av,{value:"video",className:"mt-6",children:(0,t.jsx)(n.Zp,{children:(0,t.jsx)(n.Wu,{className:"p-0",children:(0,t.jsx)(h,{className:"h-[600px]",children:(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[M&&(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Video preview"}),(0,t.jsx)(l.E,{variant:"outline",children:(s.videoPreview||[]).filter(Boolean).length})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(s.videoPreview||[]).filter(Boolean).map((e,s)=>(0,t.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,t.jsx)(d,{ratio:16/9,className:"overflow-hidden rounded-t-lg",children:(0,t.jsxs)("video",{controls:!0,preload:"metadata",className:"h-full w-full",onError:e=>{e.currentTarget.style.display="none"},children:[(0,t.jsx)("source",{src:e}),"Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ ph\xe1t video."]})}),(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Preview ",s+1]}),(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:["Mở ",(0,t.jsx)(w.A,{className:"h-3 w-3"})]})]})]},"vp-".concat(s)))})]}),$&&(0,t.jsxs)("section",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Video hướng dẫn"}),(0,t.jsx)(l.E,{variant:"outline",children:(s.videoTutorial||[]).filter(Boolean).length})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(s.videoTutorial||[]).filter(Boolean).map((e,s)=>(0,t.jsxs)("div",{className:"rounded-lg border bg-card",children:[(0,t.jsx)(d,{ratio:16/9,className:"overflow-hidden rounded-t-lg",children:(0,t.jsxs)("video",{controls:!0,preload:"metadata",className:"h-full w-full",onError:e=>{e.currentTarget.style.display="none"},children:[(0,t.jsx)("source",{src:e}),"Tr\xecnh duyệt của bạn kh\xf4ng hỗ trợ ph\xe1t video."]})}),(0,t.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Hướng dẫn ",s+1]}),(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1",children:["Mở ",(0,t.jsx)(w.A,{className:"h-3 w-3"})]})]})]},"vt-".concat(s)))})]})]})})})})})]})})]})}}}]);