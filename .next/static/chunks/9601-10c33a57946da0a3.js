"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9601],{1886:(e,t,a)=>{a.d(t,{BP:()=>c,JR:()=>r,ZQ:()=>o,d3:()=>d,i$:()=>i,iw:()=>s});let r=a(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(r).concat(e),n={};t.body instanceof FormData||(n["Content-Type"]="application/json");try{let e=localStorage.getItem("token");e&&(n.Authorization="Bearer ".concat(e))}catch(e){}let o={mode:"cors",credentials:"omit",...t,headers:{...n,...t.headers}};try{let e=await fetch(a,o),t=e.headers.get("content-type")||"",r=null;if(t.includes("application/json"))r=await e.json();else if(t){let t=await e.text();try{r=JSON.parse(t)}catch(e){r={message:t}}}if(!e.ok)throw{message:r&&r.message?r.message:"HTTP error! status: ".concat(e.status),status:e.status};return r}catch(e){if(404===(null==e?void 0:e.status)&&(a.includes("/api/sourcecode/slug/")||a.includes("/api/category/slug/"))||console.error("API call failed:",{endpoint:a,method:o.method||"GET",error:(null==e?void 0:e.message)||e}),e&&"object"==typeof e&&"message"in e)throw e;throw{message:"Network error. Please try again."}}}let o={register:async(e,t,a)=>n("/api/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:a})}),login:async(e,t)=>n("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),verify:async e=>n("/api/auth/verify?token=".concat(e),{method:"GET"}),forgetPassword:async e=>n("/api/auth/forgetpassword",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:async(e,t)=>n("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})})},s={getAll:async(e,t,a,r)=>{let o=new URLSearchParams;e&&o.append("page",e.toString()),t&&o.append("limit",t.toString()),a&&o.append("search",a),r&&o.append("category",r);let s=o.toString();return n("/api/account/getall".concat(s?"?".concat(s):""))},getById:async e=>n("/api/account/get/".concat(e)),create:async e=>n("/api/account/create",{method:"POST",body:e}),update:async(e,t)=>n("/api/account/update/".concat(e),{method:"PUT",body:t}),delete:async e=>n("/api/account/delete/".concat(e),{method:"DELETE"})},i={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=new URLSearchParams;o.append("page",e.toString()),o.append("limit",t.toString()),a&&o.append("search",a),r&&o.append("role",r);let s=o.toString();return n("/api/user/getall".concat(s?"?".concat(s):""))},getById:async e=>n("/api/user/get/".concat(e)),update:async(e,t)=>n("/api/user/update/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>n("/api/user/delete/".concat(e),{method:"DELETE"}),updatePassword:async(e,t)=>n("/api/user/update-password/".concat(e),{method:"PUT",body:JSON.stringify({newPassword:t})})},c={getAll:async(e,t,a,r)=>{let o=new URLSearchParams;e&&o.append("page",e.toString()),t&&o.append("limit",t.toString()),a&&o.append("search",a),void 0!==r&&o.append("isActive",r.toString());let s=o.toString();return n("/api/category/getall".concat(s?"?".concat(s):""))},getActive:async()=>n("/api/category/active"),getById:async e=>n("/api/category/get/".concat(e)),getBySlug:async e=>n("/api/category/slug/".concat(e)),create:async e=>n("/api/category/create",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>n("/api/category/update/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>n("/api/category/delete/".concat(e),{method:"DELETE"})},d={getAll:async(e,t,a,r,o,s,i,c,d)=>{let l=new URLSearchParams;e&&l.append("page",e.toString()),t&&l.append("limit",t.toString()),a&&l.append("search",a),r&&l.append("category",r),o&&l.append("tags",o),void 0!==s&&l.append("isActive",s.toString()),i&&l.append("createdBy",i),c&&l.append("sortBy",c),d&&l.append("sortOrder",d);let u=l.toString();return n("/api/sourcecode/getall".concat(u?"?".concat(u):""))},getById:async e=>n("/api/sourcecode/get/".concat(e)),getBySlug:async e=>n("/api/sourcecode/slug/".concat(e)),create:async e=>n("/api/sourcecode/create",{method:"POST",body:e}),update:async(e,t)=>n("/api/sourcecode/update/".concat(e),{method:"PUT",body:t}),delete:async e=>n("/api/sourcecode/delete/".concat(e),{method:"DELETE"}),incrementView:async e=>n("/api/sourcecode/view/".concat(e),{method:"PATCH"}),incrementDownload:async e=>n("/api/sourcecode/download/".concat(e),{method:"PATCH"})}},2714:(e,t,a)=>{a.d(t,{J:()=>s});var r=a(5155);a(2115);var n=a(968),o=a(3999);function s(e){let{className:t,...a}=e;return(0,r.jsx)(n.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}},3999:(e,t,a)=>{a.d(t,{cn:()=>o});var r=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},6052:(e,t,a)=>{a.d(t,{A:()=>d,AuthProvider:()=>c});var r=a(5155),n=a(2115),o=a(5695),s=a(1886);let i=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(null),[d,l]=(0,n.useState)(!0),u=(0,o.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("user");e&&c(JSON.parse(e)),l(!1)},[]);let g=async(e,t)=>{l(!0);try{let a=await s.ZQ.login(e,t);if(a.success&&a.data){let{user:e,token:t}=a.data;c(e),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)}else throw Error(a.message||"Đăng nhập thất bại")}catch(e){throw Error(e.message||"Đăng nhập thất bại")}finally{l(!1)}},p=async(e,t,a)=>{l(!0);try{let r=await s.ZQ.register(e,t,a);if(r.success)throw Error(r.message||"Đăng k\xfd th\xe0nh c\xf4ng! Vui l\xf2ng kiểm tra email để x\xe1c minh t\xe0i khoản.");throw Error(r.message||"Đăng k\xfd thất bại")}catch(e){throw Error(e.message||"Đăng k\xfd thất bại")}finally{l(!1)}},h=async e=>{l(!0);try{let t=await s.ZQ.forgetPassword(e);if(!t.success)throw Error(t.message||"Gửi email đặt lại mật khẩu thất bại")}catch(e){throw Error(e.message||"Gửi email đặt lại mật khẩu thất bại")}finally{l(!1)}},m=async(e,t)=>{l(!0);try{let a=await s.ZQ.resetPassword(e,t);if(!a.success)throw Error(a.message||"Đặt lại mật khẩu thất bại")}catch(e){throw Error(e.message||"Đặt lại mật khẩu thất bại")}finally{l(!1)}};return(0,r.jsx)(i.Provider,{value:{user:a,login:g,register:p,logout:()=>{c(null),localStorage.removeItem("user"),localStorage.removeItem("token"),u.push("/")},isLoading:d,forgetPassword:h,resetPassword:m},children:t})}function d(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>i});var r=a(5155);a(2115);var n=a(9708),o=a(2085),s=a(3999);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:o,asChild:c=!1,...d}=e,l=c?n.DX:"button";return(0,r.jsx)(l,{"data-slot":"button",className:(0,s.cn)(i({variant:a,size:o,className:t})),...d})}},8482:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>o,aR:()=>s,wL:()=>l});var r=a(5155);a(2115);var n=a(3999);function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},9026:(e,t,a)=>{a.d(t,{Fc:()=>i,TN:()=>c});var r=a(5155);a(2115);var n=a(2085),o=a(3999);let s=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,o.cn)(s({variant:a}),t),...n})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-description",className:(0,o.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}},9852:(e,t,a)=>{a.d(t,{p:()=>o});var r=a(5155);a(2115);var n=a(3999);function o(e){let{className:t,type:a,...o}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}}}]);