"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2355],{1886:(e,t,a)=>{a.d(t,{BP:()=>c,JR:()=>r,ZQ:()=>n,d3:()=>d,i$:()=>i,iw:()=>o});let r=a(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(r).concat(e),s={};t.body instanceof FormData||(s["Content-Type"]="application/json");try{let e=localStorage.getItem("token");e&&(s.Authorization="Bearer ".concat(e))}catch(e){}let n={mode:"cors",credentials:"omit",...t,headers:{...s,...t.headers}};try{let e=await fetch(a,n),t=e.headers.get("content-type")||"",r=null;if(t.includes("application/json"))r=await e.json();else if(t){let t=await e.text();try{r=JSON.parse(t)}catch(e){r={message:t}}}if(!e.ok)throw{message:r&&r.message?r.message:"HTTP error! status: ".concat(e.status),status:e.status};return r}catch(e){if(404===(null==e?void 0:e.status)&&(a.includes("/api/sourcecode/slug/")||a.includes("/api/category/slug/"))||console.error("API call failed:",{endpoint:a,method:n.method||"GET",error:(null==e?void 0:e.message)||e}),e&&"object"==typeof e&&"message"in e)throw e;throw{message:"Network error. Please try again."}}}let n={register:async(e,t,a)=>s("/api/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:a})}),login:async(e,t)=>s("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),verify:async e=>s("/api/auth/verify?token=".concat(e),{method:"GET"}),forgetPassword:async e=>s("/api/auth/forgetpassword",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:async(e,t)=>s("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})})},o={getAll:async(e,t,a,r)=>{let n=new URLSearchParams;e&&n.append("page",e.toString()),t&&n.append("limit",t.toString()),a&&n.append("search",a),r&&n.append("category",r);let o=n.toString();return s("/api/account/getall".concat(o?"?".concat(o):""))},getById:async e=>s("/api/account/get/".concat(e)),create:async e=>s("/api/account/create",{method:"POST",body:e}),update:async(e,t)=>s("/api/account/update/".concat(e),{method:"PUT",body:t}),delete:async e=>s("/api/account/delete/".concat(e),{method:"DELETE"})},i={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=new URLSearchParams;n.append("page",e.toString()),n.append("limit",t.toString()),a&&n.append("search",a),r&&n.append("role",r);let o=n.toString();return s("/api/user/getall".concat(o?"?".concat(o):""))},getById:async e=>s("/api/user/get/".concat(e)),update:async(e,t)=>s("/api/user/update/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>s("/api/user/delete/".concat(e),{method:"DELETE"}),updatePassword:async(e,t)=>s("/api/user/update-password/".concat(e),{method:"PUT",body:JSON.stringify({newPassword:t})})},c={getAll:async(e,t,a,r)=>{let n=new URLSearchParams;e&&n.append("page",e.toString()),t&&n.append("limit",t.toString()),a&&n.append("search",a),void 0!==r&&n.append("isActive",r.toString());let o=n.toString();return s("/api/category/getall".concat(o?"?".concat(o):""))},getActive:async()=>s("/api/category/active"),getById:async e=>s("/api/category/get/".concat(e)),getBySlug:async e=>s("/api/category/slug/".concat(e)),create:async e=>s("/api/category/create",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>s("/api/category/update/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>s("/api/category/delete/".concat(e),{method:"DELETE"})},d={getAll:async(e,t,a,r,n,o,i,c,d)=>{let l=new URLSearchParams;e&&l.append("page",e.toString()),t&&l.append("limit",t.toString()),a&&l.append("search",a),r&&l.append("category",r),n&&l.append("tags",n),void 0!==o&&l.append("isActive",o.toString()),i&&l.append("createdBy",i),c&&l.append("sortBy",c),d&&l.append("sortOrder",d);let u=l.toString();return s("/api/sourcecode/getall".concat(u?"?".concat(u):""))},getById:async e=>s("/api/sourcecode/get/".concat(e)),getBySlug:async e=>s("/api/sourcecode/slug/".concat(e)),create:async e=>s("/api/sourcecode/create",{method:"POST",body:e}),update:async(e,t)=>s("/api/sourcecode/update/".concat(e),{method:"PUT",body:t}),delete:async e=>s("/api/sourcecode/delete/".concat(e),{method:"DELETE"}),incrementView:async e=>s("/api/sourcecode/view/".concat(e),{method:"PATCH"}),incrementDownload:async e=>s("/api/sourcecode/download/".concat(e),{method:"PATCH"})}},2956:(e,t,a)=>{a.d(t,{CartProvider:()=>o,_:()=>i});var r=a(5155),s=a(2115);let n=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");e&&o(JSON.parse(e))},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(a))},[a]);let i=e=>{o(t=>t.filter(t=>t.id!==e))};return(0,r.jsx)(n.Provider,{value:{items:a,addToCart:e=>{o(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:i,updateQuantity:(e,t)=>{if(t<=0){i(e);return}o(a=>a.map(a=>a.id===e?{...a,quantity:t}:a))},clearCart:()=>{o([])},getTotalItems:()=>a.reduce((e,t)=>e+t.quantity,0),getTotalPrice:()=>a.reduce((e,t)=>e+t.price*t.quantity,0)},children:t})}function i(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},3580:(e,t,a)=>{a.d(t,{dj:()=>g,oR:()=>u});var r=a(2115);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function l(e){d=i(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>l({type:"DISMISS_TOAST",toastId:a});return l({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function g(){let[e,t]=r.useState(d);return r.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},3999:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},4736:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(5155),s=a(8482),n=a(8145),o=a(7168),i=a(1788),c=a(9803),d=a(7809),l=a(2657),u=a(6874),g=a.n(u),p=a(2956),h=a(6052),m=a(3580);function v(e){let{id:t,title:a,description:u,price:v,originalPrice:f,category:y,image:x,seller:b,isHot:S=!1,href:w,productType:T="source-code",isPurchased:N=!1}=e,{addToCart:j}=(0,p._)(),{user:E}=(0,h.A)(),{toast:P}=(0,m.dj)(),A=f?Math.round((f-v)/f*100):0;return(0,r.jsxs)(s.Zp,{className:"group hover:shadow-lg transition-all duration-300 hover:-translate-y-1 bg-card border-border",children:[(0,r.jsxs)(s.aR,{className:"p-0 relative",children:[(0,r.jsx)("div",{className:"aspect-video bg-muted rounded-t-lg overflow-hidden",children:(0,r.jsx)("img",{src:x||"/placeholder.svg",alt:a,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,r.jsxs)("div",{className:"absolute top-2 left-2 flex gap-2",children:[S&&(0,r.jsx)(n.E,{variant:"destructive",className:"text-xs",children:"HOT"}),A>0&&(0,r.jsxs)(n.E,{variant:"secondary",className:"text-xs bg-primary text-primary-foreground",children:["-",A,"%"]})]}),(0,r.jsx)(n.E,{variant:"outline",className:"absolute top-2 right-2 text-xs",children:y})]}),(0,r.jsx)(s.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg line-clamp-2 group-hover:text-primary transition-colors",children:a}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:u}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-primary",children:[v.toLocaleString("vi-VN"),"đ"]}),f&&(0,r.jsxs)("span",{className:"text-sm text-muted-foreground line-through",children:[f.toLocaleString("vi-VN"),"đ"]})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Bởi ",b]})]})}),(0,r.jsxs)(s.wL,{className:"p-4 pt-0 flex gap-2",children:[N?"source-code"===T?(0,r.jsx)(o.$,{className:"flex-1",asChild:!0,children:(0,r.jsxs)(g(),{href:"/dashboard/download/".concat(t),children:[(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Tải xuống"]})}):(0,r.jsx)(o.$,{className:"flex-1",asChild:!0,children:(0,r.jsxs)(g(),{href:"/dashboard/account-info/".concat(t),children:[(0,r.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Lấy th\xf4ng tin đăng nhập"]})}):(0,r.jsxs)(o.$,{onClick:()=>{if(!E){P({title:"Y\xeau cầu đăng nhập",description:"Vui l\xf2ng đăng nhập để th\xeam sản phẩm v\xe0o giỏ h\xe0ng",variant:"destructive"});return}j({id:t,title:a,price:v,originalPrice:f,image:x,seller:b}),P({title:"Th\xe0nh c\xf4ng!",description:"Đ\xe3 th\xeam sản phẩm v\xe0o giỏ h\xe0ng"})},className:"flex-1",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Th\xeam v\xe0o giỏ"]}),(0,r.jsx)(o.$,{variant:"outline",size:"icon",asChild:!0,children:(0,r.jsx)(g(),{href:w||"/product/".concat(t),children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})})]})]})}},6052:(e,t,a)=>{a.d(t,{A:()=>d,AuthProvider:()=>c});var r=a(5155),s=a(2115),n=a(5695),o=a(1886);let i=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,s.useState)(null),[d,l]=(0,s.useState)(!0),u=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("user");e&&c(JSON.parse(e)),l(!1)},[]);let g=async(e,t)=>{l(!0);try{let a=await o.ZQ.login(e,t);if(a.success&&a.data){let{user:e,token:t}=a.data;c(e),localStorage.setItem("user",JSON.stringify(e)),localStorage.setItem("token",t)}else throw Error(a.message||"Đăng nhập thất bại")}catch(e){throw Error(e.message||"Đăng nhập thất bại")}finally{l(!1)}},p=async(e,t,a)=>{l(!0);try{let r=await o.ZQ.register(e,t,a);if(r.success)throw Error(r.message||"Đăng k\xfd th\xe0nh c\xf4ng! Vui l\xf2ng kiểm tra email để x\xe1c minh t\xe0i khoản.");throw Error(r.message||"Đăng k\xfd thất bại")}catch(e){throw Error(e.message||"Đăng k\xfd thất bại")}finally{l(!1)}},h=async e=>{l(!0);try{let t=await o.ZQ.forgetPassword(e);if(!t.success)throw Error(t.message||"Gửi email đặt lại mật khẩu thất bại")}catch(e){throw Error(e.message||"Gửi email đặt lại mật khẩu thất bại")}finally{l(!1)}},m=async(e,t)=>{l(!0);try{let a=await o.ZQ.resetPassword(e,t);if(!a.success)throw Error(a.message||"Đặt lại mật khẩu thất bại")}catch(e){throw Error(e.message||"Đặt lại mật khẩu thất bại")}finally{l(!1)}};return(0,r.jsx)(i.Provider,{value:{user:a,login:g,register:p,logout:()=>{c(null),localStorage.removeItem("user"),localStorage.removeItem("token"),u.push("/")},isLoading:d,forgetPassword:h,resetPassword:m},children:t})}function d(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7168:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>i});var r=a(5155);a(2115);var s=a(9708),n=a(2085),o=a(3999);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:a,size:n,asChild:c=!1,...d}=e,l=c?s.DX:"button";return(0,r.jsx)(l,{"data-slot":"button",className:(0,o.cn)(i({variant:a,size:n,className:t})),...d})}},8145:(e,t,a)=>{a.d(t,{E:()=>c});var r=a(5155);a(2115);var s=a(9708),n=a(2085),o=a(3999);let i=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a,asChild:n=!1,...c}=e,d=n?s.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,o.cn)(i({variant:a}),t),...c})}},8482:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>o,wL:()=>l});var r=a(5155);a(2115);var s=a(3999);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}}}]);