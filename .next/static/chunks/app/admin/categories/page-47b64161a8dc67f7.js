(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6631],{88:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var n=s(5155);s(2115);var a=s(4884),i=s(3999);function r(e){let{className:t,...s}=e;return(0,n.jsx)(a.bL,{"data-slot":"switch",className:(0,i.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,n.jsx)(a.zi,{"data-slot":"switch-thumb",className:(0,i.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},1505:(e,t,s)=>{Promise.resolve().then(s.bind(s,3614))},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>h});var n=s(2115);let a=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function o(e){l=c(l,e),d.forEach(e=>{e(l)})}function h(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=n.useState(l);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:h,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},3614:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var n=s(5155),a=s(2115),i=s(1886),r=s(7168),c=s(9852),d=s(2714),l=s(9474),o=s(88),h=s(8482),m=s(9840),x=s(8524),u=s(8145),p=s(4616),g=s(7924),j=s(2657),v=s(3717),f=s(2525),b=s(3580),N=s(2495);let y={name:"",description:"",slug:"",isActive:!0,sortOrder:0};function A(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[o,A]=(0,a.useState)(""),[C,T]=(0,a.useState)(void 0),[k,S]=(0,a.useState)(!1),[O,E]=(0,a.useState)(!1),[L,_]=(0,a.useState)(!1),[R,D]=(0,a.useState)(null),[I,J]=(0,a.useState)(y),[$,M]=(0,a.useState)(!1),K=async()=>{try{l(!0);let e=await i.BP.getAll(void 0,void 0,o,C);e.success?t(e.data||[]):(0,b.oR)({title:"Lỗi",description:"Kh\xf4ng thể tải danh s\xe1ch danh mục",variant:"destructive"})}catch(e){console.error("Error fetching categories:",e),(0,b.oR)({title:"Lỗi",description:"C\xf3 lỗi xảy ra khi tải danh mục",variant:"destructive"})}finally{l(!1)}};(0,a.useEffect)(()=>{K()},[o,C]);let B=(e,t)=>{if(J(s=>({...s,[e]:t})),"name"===e&&"string"==typeof t){let e=t.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim("-");J(t=>({...t,slug:e}))}},F=async()=>{if(!I.name.trim()){(0,b.oR)({title:"Lỗi",description:"T\xean danh mục kh\xf4ng được để trống",variant:"destructive"});return}try{M(!0);let e=await i.BP.create({name:I.name.trim(),description:I.description.trim()||void 0,slug:I.slug.trim()||void 0,isActive:I.isActive,sortOrder:I.sortOrder});e.success?((0,b.oR)({title:"Th\xe0nh c\xf4ng",description:"Tạo danh mục th\xe0nh c\xf4ng"}),S(!1),J(y),K()):(0,b.oR)({title:"Lỗi",description:e.message||"Kh\xf4ng thể tạo danh mục",variant:"destructive"})}catch(e){console.error("Error creating category:",e),(0,b.oR)({title:"Lỗi",description:"C\xf3 lỗi xảy ra khi tạo danh mục",variant:"destructive"})}finally{M(!1)}},z=async()=>{if(!R||!I.name.trim()){(0,b.oR)({title:"Lỗi",description:"T\xean danh mục kh\xf4ng được để trống",variant:"destructive"});return}try{M(!0);let e=await i.BP.update(R._id,{name:I.name.trim(),description:I.description.trim()||void 0,slug:I.slug.trim()||void 0,isActive:I.isActive,sortOrder:I.sortOrder});e.success?((0,b.oR)({title:"Th\xe0nh c\xf4ng",description:"Cập nhật danh mục th\xe0nh c\xf4ng"}),E(!1),D(null),J(y),K()):(0,b.oR)({title:"Lỗi",description:e.message||"Kh\xf4ng thể cập nhật danh mục",variant:"destructive"})}catch(e){console.error("Error updating category:",e),(0,b.oR)({title:"Lỗi",description:"C\xf3 lỗi xảy ra khi cập nhật danh mục",variant:"destructive"})}finally{M(!1)}},H=async e=>{if(confirm('Bạn c\xf3 chắc chắn muốn x\xf3a danh mục "'.concat(e.name,'"?')))try{let t=await i.BP.delete(e._id);t.success?((0,b.oR)({title:"Th\xe0nh c\xf4ng",description:"X\xf3a danh mục th\xe0nh c\xf4ng"}),K()):(0,b.oR)({title:"Lỗi",description:t.message||"Kh\xf4ng thể x\xf3a danh mục",variant:"destructive"})}catch(e){console.error("Error deleting category:",e),(0,b.oR)({title:"Lỗi",description:"C\xf3 lỗi xảy ra khi x\xf3a danh mục",variant:"destructive"})}},P=e=>{D(e),J({name:e.name,description:e.description||"",slug:e.slug,isActive:e.isActive,sortOrder:e.sortOrder}),E(!0)},V=e=>{D(e),_(!0)},G=(null==e?void 0:e.filter(e=>{var t;let s=e.name.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))||e.slug.toLowerCase().includes(o.toLowerCase()),n=void 0===C||e.isActive===C;return s&&n}))||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.DashboardSidebar,{}),(0,n.jsx)("div",{className:"flex-1 overflow-auto lg:pl-64",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Quản l\xfd danh mục"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Quản l\xfd danh mục sản phẩm trong hệ thống"})]}),(0,n.jsxs)(m.lG,{open:k,onOpenChange:S,children:[(0,n.jsx)(m.zM,{asChild:!0,children:(0,n.jsxs)(r.$,{children:[(0,n.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Tạo danh mục"]})}),(0,n.jsxs)(m.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(m.c7,{children:[(0,n.jsx)(m.L3,{children:"Tạo danh mục mới"}),(0,n.jsx)(m.rr,{children:"Điền th\xf4ng tin để tạo danh mục mới"})]}),(0,n.jsx)(w,{formData:I,onInputChange:B}),(0,n.jsxs)(m.Es,{children:[(0,n.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>{S(!1),J(y)},children:"Hủy"}),(0,n.jsx)(r.$,{type:"button",onClick:F,disabled:$,children:$?"Đang tạo...":"Tạo danh mục"})]})]})]})]}),(0,n.jsx)(h.Zp,{className:"mb-6",children:(0,n.jsx)(h.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(g.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(c.p,{placeholder:"T\xecm kiếm theo t\xean, m\xf4 tả hoặc slug...",value:o,onChange:e=>A(e.target.value),className:"pl-10"})]})}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.$,{variant:void 0===C?"default":"outline",onClick:()=>T(void 0),children:"Tất cả"}),(0,n.jsx)(r.$,{variant:!0===C?"default":"outline",onClick:()=>T(!0),children:"Hoạt động"}),(0,n.jsx)(r.$,{variant:!1===C?"default":"outline",onClick:()=>T(!1),children:"Kh\xf4ng hoạt động"})]})]})})}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsxs)(h.ZB,{children:["Danh s\xe1ch danh mục (",G.length,")"]}),(0,n.jsx)(h.BT,{children:"Quản l\xfd tất cả danh mục sản phẩm"})]}),(0,n.jsx)(h.Wu,{children:s?(0,n.jsx)("div",{className:"text-center py-8",children:(0,n.jsx)("p",{children:"Đang tải..."})}):0===G.length?(0,n.jsx)("div",{className:"text-center py-8",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Kh\xf4ng c\xf3 danh mục n\xe0o"})}):(0,n.jsxs)(x.XI,{children:[(0,n.jsx)(x.A0,{children:(0,n.jsxs)(x.Hj,{children:[(0,n.jsx)(x.nd,{children:"T\xean"}),(0,n.jsx)(x.nd,{children:"Slug"}),(0,n.jsx)(x.nd,{children:"M\xf4 tả"}),(0,n.jsx)(x.nd,{children:"Trạng th\xe1i"}),(0,n.jsx)(x.nd,{children:"Thứ tự"}),(0,n.jsx)(x.nd,{children:"Ng\xe0y tạo"}),(0,n.jsx)(x.nd,{className:"text-right",children:"Thao t\xe1c"})]})}),(0,n.jsx)(x.BF,{children:G.map(e=>(0,n.jsxs)(x.Hj,{children:[(0,n.jsx)(x.nA,{className:"font-medium",children:e.name}),(0,n.jsx)(x.nA,{children:(0,n.jsx)("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:e.slug})}),(0,n.jsx)(x.nA,{className:"max-w-xs truncate",children:e.description||"-"}),(0,n.jsx)(x.nA,{children:(0,n.jsx)(u.E,{variant:e.isActive?"default":"secondary",children:e.isActive?"Hoạt động":"Kh\xf4ng hoạt động"})}),(0,n.jsx)(x.nA,{children:e.sortOrder}),(0,n.jsx)(x.nA,{children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,n.jsx)(x.nA,{className:"text-right",children:(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>V(e),children:(0,n.jsx)(j.A,{className:"h-4 w-4"})}),(0,n.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>P(e),children:(0,n.jsx)(v.A,{className:"h-4 w-4"})}),(0,n.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>H(e),children:(0,n.jsx)(f.A,{className:"h-4 w-4"})})]})})]},e._id))})]})})]})]})}),(0,n.jsx)(m.lG,{open:O,onOpenChange:E,children:(0,n.jsxs)(m.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(m.c7,{children:[(0,n.jsx)(m.L3,{children:"Chỉnh sửa danh mục"}),(0,n.jsx)(m.rr,{children:"Cập nhật th\xf4ng tin danh mục"})]}),(0,n.jsx)(w,{formData:I,onInputChange:B}),(0,n.jsxs)(m.Es,{children:[(0,n.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>{E(!1),D(null),J(y)},children:"Hủy"}),(0,n.jsx)(r.$,{type:"button",onClick:z,disabled:$,children:$?"Đang cập nhật...":"Cập nhật"})]})]})}),(0,n.jsx)(m.lG,{open:L,onOpenChange:_,children:(0,n.jsxs)(m.Cf,{className:"sm:max-w-[425px]",children:[(0,n.jsx)(m.c7,{children:(0,n.jsx)(m.L3,{children:"Chi tiết danh mục"})}),R&&(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"T\xean danh mục"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:R.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"Slug"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,n.jsx)("code",{className:"bg-muted px-2 py-1 rounded",children:R.slug})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"M\xf4 tả"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:R.description||"Kh\xf4ng c\xf3 m\xf4 tả"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"Trạng th\xe1i"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,n.jsx)(u.E,{variant:R.isActive?"default":"secondary",children:R.isActive?"Hoạt động":"Kh\xf4ng hoạt động"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"Thứ tự sắp xếp"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:R.sortOrder})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"Ng\xe0y tạo"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(R.createdAt).toLocaleString("vi-VN")})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(d.J,{className:"text-sm font-medium",children:"Ng\xe0y cập nhật"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(R.updatedAt).toLocaleString("vi-VN")})]})]}),(0,n.jsx)(m.Es,{children:(0,n.jsx)(r.$,{type:"button",onClick:()=>{_(!1),D(null)},children:"Đ\xf3ng"})})]})})]})}function w(e){let{formData:t,onInputChange:s}=e;return(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"name",children:"T\xean danh mục *"}),(0,n.jsx)(c.p,{id:"name",value:t.name,onChange:e=>s("name",e.target.value),placeholder:"Nhập t\xean danh mục"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"slug",children:"Slug"}),(0,n.jsx)(c.p,{id:"slug",value:t.slug,onChange:e=>s("slug",e.target.value),placeholder:"Tự động tạo từ t\xean danh mục"})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"description",children:"M\xf4 tả"}),(0,n.jsx)(l.T,{id:"description",value:t.description,onChange:e=>s("description",e.target.value),placeholder:"Nhập m\xf4 tả danh mục",rows:3})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(d.J,{htmlFor:"sortOrder",children:"Thứ tự sắp xếp"}),(0,n.jsx)(c.p,{id:"sortOrder",type:"number",value:t.sortOrder,onChange:e=>s("sortOrder",parseInt(e.target.value)||0),placeholder:"0"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.d,{id:"isActive",checked:t.isActive,onCheckedChange:e=>s("isActive",e)}),(0,n.jsx)(d.J,{htmlFor:"isActive",children:"K\xedch hoạt danh mục"})]})]})}},8524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>r,BF:()=>c,Hj:()=>d,XI:()=>i,nA:()=>o,nd:()=>l});var n=s(5155);s(2115);var a=s(3999);function i(e){let{className:t,...s}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",t),...s})})}function r(e){let{className:t,...s}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",t),...s})}function c(e){let{className:t,...s}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",t),...s})}function d(e){let{className:t,...s}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function l(e){let{className:t,...s}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},9474:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var n=s(5155);s(2115);var a=s(3999);function i(e){let{className:t,...s}=e;return(0,n.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9460,7244,409,5452,3134,7684,1133,8441,1684,7358],()=>t(1505)),_N_E=e.O()}]);