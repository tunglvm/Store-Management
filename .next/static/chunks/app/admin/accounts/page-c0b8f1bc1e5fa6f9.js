(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7975],{4409:(e,t,s)=>{Promise.resolve().then(s.bind(s,9398))},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5784:(e,t,s)=>{"use strict";s.d(t,{Select:()=>o,SelectContent:()=>h,SelectItem:()=>p,SelectTrigger:()=>m,SelectValue:()=>d});var a=s(5155);s(2115);var i=s(663),n=s(6474),r=s(5196),l=s(7863),c=s(3999);function o(e){let{...t}=e;return(0,a.jsx)(i.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,a.jsx)(i.WT,{"data-slot":"select-value",...t})}function m(e){let{className:t,size:s="default",children:r,...l}=e;return(0,a.jsxs)(i.l9,{"data-slot":"select-trigger","data-size":s,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function h(e){let{className:t,children:s,position:n="popper",...r}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.LM,{className:(0,c.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(x,{})]})})}function p(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(i.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(r.A,{className:"size-4"})})}),(0,a.jsx)(i.p4,{children:s})]})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(i.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(l.A,{className:"size-4"})})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(i.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"size-4"})})}},6559:(e,t,s)=>{"use strict";s.d(t,{$v:()=>x,EO:()=>m,Lt:()=>l,Rx:()=>g,Zr:()=>v,ck:()=>p,r7:()=>u,tv:()=>c,wd:()=>h});var a=s(5155);s(2115);var i=s(7649),n=s(3999),r=s(7168);function l(e){let{...t}=e;return(0,a.jsx)(i.bL,{"data-slot":"alert-dialog",...t})}function c(e){let{...t}=e;return(0,a.jsx)(i.l9,{"data-slot":"alert-dialog-trigger",...t})}function o(e){let{...t}=e;return(0,a.jsx)(i.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(i.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function m(e){let{className:t,...s}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(i.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function h(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...s})}function p(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(i.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",t),...s})}function x(e){let{className:t,...s}=e;return(0,a.jsx)(i.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)(i.rc,{className:(0,n.cn)((0,r.r)(),t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)(i.ZD,{className:(0,n.cn)((0,r.r)({variant:"outline"}),t),...s})}},9398:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(5155),i=s(2115),n=s(2495),r=s(8482),l=s(7168),c=s(9852),o=s(2714),d=s(9474),m=s(5784),h=s(8145),p=s(9840),u=s(6559),x=s(2525),g=s(4616),v=s(1154),j=s(7924),f=s(3717),b=s(1886),y=s(6671),N=s(8738);function w(){let{isCollapsed:e}=(0,N.c)(),[t,s]=(0,i.useState)([]),[w,k]=(0,i.useState)([]),[C,S]=(0,i.useState)(!0),[T,_]=(0,i.useState)(null),[z,A]=(0,i.useState)(""),[D,E]=(0,i.useState)("Tất cả"),[L,$]=(0,i.useState)(1),[F,R]=(0,i.useState)(0),[J,V]=(0,i.useState)(!1),[P,G]=(0,i.useState)(!1),[M,Z]=(0,i.useState)(null),[K,O]=(0,i.useState)(!1),[q,I]=(0,i.useState)({name:"",category:[],price:0,Discount:0,stock:0,duration:"1_month",description:[""],policy:[""]}),X=async()=>{try{let e=await b.BP.getActive();console.log("Categories response:",e),e.success&&e.data&&k(e.data||[])}catch(e){console.error("Lỗi khi tải danh mục:",e)}},B=async()=>{try{S(!0);let e=await b.iw.getAll(L,10);if(console.log("API Response:",e),e.success&&e.data){let t=[],a=0;Array.isArray(e.data)?(t=e.data,a=e.count||e.data.length):e.data.accounts?(t=e.data.accounts,a=e.data.count||e.data.total||0):e.data.items&&(t=e.data.items,a=e.data.count||e.data.total||0),s(t),R(a),console.log("Accounts set:",t)}else _(e.message||"Kh\xf4ng thể tải danh s\xe1ch t\xe0i khoản")}catch(e){console.error("Fetch error:",e),_("Lỗi kết nối đến server")}finally{S(!1)}};(0,i.useEffect)(()=>{X(),B()},[L]),(0,i.useEffect)(()=>{X()},[]);let H=(null==t?void 0:t.filter(e=>{let t=e.name.toLowerCase().includes(z.toLowerCase()),s="Tất cả"===D||e.category.includes(D);return t&&s}))||[],U=()=>{I({name:"",category:[],price:0,Discount:0,stock:0,description:[""],policy:[""]}),Z(null)},W=async e=>{e.preventDefault(),O(!0);try{let e=new FormData;e.append("name",q.name),e.append("price",q.price.toString()),e.append("Discount",(q.Discount||0).toString()),e.append("stock",(q.stock||0).toString()),e.append("category",q.category.join(",")),e.append("description",q.description.join(",")),e.append("policy",q.policy.join(",")),q.thumbnail&&e.append("thumbnail",q.thumbnail),q.imagepreview&&q.imagepreview.length>0&&q.imagepreview.forEach(t=>{e.append("imagepreview",t)}),q.videopreview&&q.videopreview.length>0&&q.videopreview.forEach(t=>{e.append("videopreview",t)});let t=await b.iw.create(e);t.success?(y.oR.success("Tạo t\xe0i khoản th\xe0nh c\xf4ng!"),V(!1),U(),B()):y.oR.error(t.message||"Kh\xf4ng thể tạo t\xe0i khoản")}catch(e){y.oR.error("Lỗi kết nối đến server")}finally{O(!1)}},Q=async e=>{if(e.preventDefault(),M){O(!0);try{let e=new FormData;e.append("name",q.name),e.append("price",q.price.toString()),e.append("Discount",(q.Discount||0).toString()),e.append("stock",(q.stock||0).toString()),e.append("category",q.category.join(",")),e.append("description",q.description.join(",")),e.append("policy",q.policy.join(",")),q.thumbnail&&e.append("thumbnail",q.thumbnail),q.imagepreview&&q.imagepreview.length>0&&q.imagepreview.forEach(t=>{e.append("imagepreview",t)}),q.videopreview&&q.videopreview.length>0&&q.videopreview.forEach(t=>{e.append("videopreview",t)});let t=await b.iw.update(M._id,e);t.success?(y.oR.success("Cập nhật t\xe0i khoản th\xe0nh c\xf4ng!"),G(!1),U(),B()):y.oR.error(t.message||"Kh\xf4ng thể cập nhật t\xe0i khoản")}catch(e){y.oR.error("Lỗi kết nối đến server")}finally{O(!1)}}},Y=async e=>{try{let t=await b.iw.delete(e);t.success?(y.oR.success("X\xf3a t\xe0i khoản th\xe0nh c\xf4ng!"),B()):y.oR.error(t.message||"Kh\xf4ng thể x\xf3a t\xe0i khoản")}catch(e){y.oR.error("Lỗi kết nối đến server")}},ee=e=>{Z(e),I({name:e.name,category:e.category,price:e.price,Discount:e.Discount,stock:e.stock,duration:e.duration||"1_month",description:e.description||[""],policy:e.policy||[""]}),G(!0)},et=(e,t)=>{t&&("thumbnail"===e?I(s=>({...s,[e]:t[0]})):("imagepreview"===e||"videopreview"===e)&&I(s=>({...s,[e]:Array.from(t)})))},es=(e,t,s)=>{I(a=>({...a,[e]:a[e].map((e,a)=>a===t?s:e)}))},ea=e=>{I(t=>({...t,[e]:[...t[e],""]}))},ei=(e,t)=>{I(s=>({...s,[e]:s[e].filter((e,s)=>s!==t)}))},en=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,a.jsxs)("form",{onSubmit:e?Q:W,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-name",children:"T\xean sản phẩm *"}),(0,a.jsx)(c.p,{id:"account-name",value:q.name,onChange:e=>I(t=>({...t,name:e.target.value})),required:!0,placeholder:"Nhập t\xean sản phẩm"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-category",children:"Danh mục *"}),(0,a.jsxs)("div",{className:"border rounded-md p-3 space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Chọn một hoặc nhiều danh mục:"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:w.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"category-".concat(e._id),checked:q.category.includes(e.name),onChange:t=>{t.target.checked?I(t=>({...t,category:[...t.category,e.name]})):I(t=>({...t,category:t.category.filter(t=>t!==e.name)}))},className:"rounded border-gray-300"}),(0,a.jsx)("label",{htmlFor:"category-".concat(e._id),className:"text-sm cursor-pointer",children:e.name})]},e._id))}),q.category.length>0&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Đ\xe3 chọn:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:q.category.map((e,t)=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-800",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>{I(t=>({...t,category:t.category.filter(t=>t!==e)}))},className:"ml-1 text-blue-600 hover:text-blue-800",children:"\xd7"})]},t))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-price",children:"Gi\xe1 b\xe1n *"}),(0,a.jsx)(c.p,{id:"account-price",type:"number",min:"0",step:"1000",value:q.price||"",onChange:e=>{let t=e.target.value;(""===t||!isNaN(Number(t))&&Number(t)>=0)&&I(e=>({...e,price:""===t?0:Number(t)}))},required:!0,placeholder:"Nhập gi\xe1 b\xe1n"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-discount",children:"Giảm gi\xe1 (%)"}),(0,a.jsx)(c.p,{id:"account-discount",type:"number",min:"0",max:"100",step:"1",value:q.Discount||"",onChange:e=>{let t=e.target.value;(""===t||!isNaN(Number(t))&&Number(t)>=0&&100>=Number(t))&&I(e=>({...e,Discount:""===t?void 0:Number(t)}))},placeholder:"Nhập % giảm gi\xe1"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-stock",children:"Số lượng tồn kho"}),(0,a.jsx)(c.p,{id:"account-stock",type:"number",min:"0",step:"1",value:q.stock||"",onChange:e=>{let t=e.target.value;(""===t||!isNaN(Number(t))&&Number(t)>=0)&&I(e=>({...e,stock:""===t?void 0:Number(t)}))},placeholder:"Nhập số lượng"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"account-duration",children:"G\xf3i thời gian"}),(0,a.jsxs)("select",{id:"account-duration",value:q.duration,onChange:e=>I(t=>({...t,duration:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"1_month",children:"1 th\xe1ng"}),(0,a.jsx)("option",{value:"3_months",children:"3 th\xe1ng"}),(0,a.jsx)("option",{value:"6_months",children:"6 th\xe1ng"}),(0,a.jsx)("option",{value:"1_year",children:"1 năm"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"M\xf4 tả"}),q.description.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.T,{value:e,onChange:e=>es("description",t,e.target.value),placeholder:"Nhập m\xf4 tả..."}),q.description.length>1&&(0,a.jsx)(l.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ei("description",t),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]},t)),(0,a.jsxs)(l.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ea("description"),children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Th\xeam m\xf4 tả"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{children:"Ch\xednh s\xe1ch"}),q.policy.map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.T,{value:e,onChange:e=>es("policy",t,e.target.value),placeholder:"Nhập ch\xednh s\xe1ch..."}),q.policy.length>1&&(0,a.jsx)(l.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ei("policy",t),children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]},t)),(0,a.jsxs)(l.$,{type:"button",variant:"outline",size:"sm",onClick:()=>ea("policy"),children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"})," Th\xeam ch\xednh s\xe1ch"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"thumbnail",className:"text-sm font-medium",children:"Ảnh thumbnail"}),e&&(null==M?void 0:M.thumbnail)&&!q.thumbnail&&(0,a.jsxs)("div",{className:"mt-2 p-2 border rounded-md bg-gray-50",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Ảnh hiện tại:"}),(0,a.jsx)("img",{src:"http://localhost:5000/api/files/".concat(M.thumbnail),alt:"Current thumbnail",className:"w-20 h-20 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"thumbnail",type:"file",accept:"image/*",onChange:e=>et("thumbnail",e.target.files),className:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e?"Chọn ảnh mới để thay thế":"Chọn ảnh đại diện"})]}),q.thumbnail&&(0,a.jsx)("div",{className:"mt-2 p-2 border rounded-md bg-blue-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-blue-700 truncate",children:q.thumbnail.name}),(0,a.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>I(e=>({...e,thumbnail:null})),className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:"\xd7"})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"imagepreview",className:"text-sm font-medium",children:"Ảnh preview"}),e&&(null==M?void 0:M.imagepreview)&&M.imagepreview.length>0&&(!q.imagepreview||0===q.imagepreview.length)&&(0,a.jsxs)("div",{className:"mt-2 p-2 border rounded-md bg-gray-50",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Ảnh preview hiện tại:"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:M.imagepreview.map((e,t)=>(0,a.jsx)("img",{src:"http://localhost:5000/api/files/".concat(e),alt:"Preview ".concat(t+1),className:"w-16 h-16 object-cover rounded border",onError:e=>{e.currentTarget.style.display="none"}},t))})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"imagepreview",type:"file",accept:"image/*",multiple:!0,onChange:e=>et("imagepreview",e.target.files),className:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e?"Chọn ảnh mới để thay thế":"Chọn nhiều ảnh preview"})]}),q.imagepreview&&q.imagepreview.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:Array.from(q.imagepreview).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md bg-green-50",children:[(0,a.jsx)("span",{className:"text-sm text-green-700 truncate",children:e.name}),(0,a.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=Array.from(q.imagepreview||[]).filter((e,s)=>s!==t);I(t=>({...t,imagepreview:e.length>0?e:null}))},className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:"\xd7"})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"videopreview",className:"text-sm font-medium",children:"Video preview"}),e&&(null==M?void 0:M.videopreview)&&M.videopreview.length>0&&(!q.videopreview||0===q.videopreview.length)&&(0,a.jsxs)("div",{className:"mt-2 p-2 border rounded-md bg-gray-50",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Video preview hiện tại:"}),(0,a.jsx)("div",{className:"space-y-2",children:M.videopreview.map((e,t)=>(0,a.jsxs)("div",{className:"border rounded p-2",children:[(0,a.jsx)("video",{src:"http://localhost:5000/api/files/".concat(e),className:"w-full h-32 object-cover rounded",controls:!0,onError:e=>{e.currentTarget.style.display="none"}}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Video ",t+1]})]},t))})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.p,{id:"videopreview",type:"file",accept:"video/*",multiple:!0,onChange:e=>et("videopreview",e.target.files),className:"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e?"Chọn video mới để thay thế":"Chọn video demo"})]}),q.videopreview&&q.videopreview.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1 max-h-32 overflow-y-auto",children:Array.from(q.videopreview).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md bg-purple-50",children:[(0,a.jsx)("span",{className:"text-sm text-purple-700 truncate",children:e.name}),(0,a.jsx)(l.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=Array.from(q.videopreview||[]).filter((e,s)=>s!==t);I(t=>({...t,videopreview:e.length>0?e:null}))},className:"text-red-600 hover:text-red-800 h-6 w-6 p-0",children:"\xd7"})]},t))})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>{e?G(!1):V(!1),U()},children:"Hủy"}),(0,a.jsxs)(l.$,{type:"submit",disabled:K,children:[K&&(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2 animate-spin"}),e?"Cập nhật":"Tạo mới"]})]})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.DashboardSidebar,{}),(0,a.jsx)("div",{className:"flex-1 overflow-auto transition-all duration-300 ".concat(e?"lg:pl-16":"lg:pl-64"),children:(0,a.jsxs)("main",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Quản l\xfd t\xe0i khoản"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Tạo, chỉnh sửa v\xe0 quản l\xfd t\xe0i khoản sản phẩm"})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsx)(r.ZB,{children:"Danh s\xe1ch t\xe0i khoản"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.p,{placeholder:"T\xecm kiếm t\xe0i khoản...",value:z,onChange:e=>A(e.target.value),className:"pl-10 w-64"})]}),(0,a.jsxs)(m.Select,{value:D,onValueChange:E,children:[(0,a.jsx)(m.SelectTrigger,{className:"w-40",children:(0,a.jsx)(m.SelectValue,{})}),(0,a.jsxs)(m.SelectContent,{children:[(0,a.jsx)(m.SelectItem,{value:"Tất cả",children:"Tất cả"}),w.map(e=>(0,a.jsx)(m.SelectItem,{value:e.name,children:e.name},e._id))]})]}),(0,a.jsxs)(p.lG,{open:J,onOpenChange:V,children:[(0,a.jsx)(p.zM,{asChild:!0,children:(0,a.jsxs)(l.$,{onClick:()=>U(),children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Tạo t\xe0i khoản"]})}),(0,a.jsxs)(p.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(p.c7,{children:(0,a.jsx)(p.L3,{children:"Tạo t\xe0i khoản mới"})}),en(!1)]})]})]})]})}),(0,a.jsxs)(r.Wu,{children:[C&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(v.A,{className:"h-8 w-8 animate-spin"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Đang tải t\xe0i khoản..."})]}),T&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:T}),(0,a.jsx)(l.$,{onClick:B,variant:"outline",children:"Thử lại"})]}),!C&&!T&&(0,a.jsxs)(a.Fragment,{children:[H.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"T\xean sản phẩm"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Danh mục"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Gi\xe1"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Giảm gi\xe1"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"G\xf3i thời gian"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Tồn kho"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Ng\xe0y tạo"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium",children:"Thao t\xe1c"})]})}),(0,a.jsx)("tbody",{children:H.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-b border-border hover:bg-muted/50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[e.thumbnail&&(0,a.jsx)("img",{src:"http://localhost:5000/api/files/".concat(e.thumbnail),alt:e.name,className:"w-10 h-10 rounded object-cover",onError:e=>{e.currentTarget.style.display="none"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground truncate max-w-xs",children:(null===(t=e.description)||void 0===t?void 0:t[0])||"Kh\xf4ng c\xf3 m\xf4 tả"})]})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.category.map(e=>(0,a.jsx)(h.E,{variant:"secondary",className:"mr-1",children:e},e))}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:[e.price.toLocaleString("vi-VN"),"đ"]}),e.originalPrice&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground line-through",children:[e.originalPrice.toLocaleString("vi-VN"),"đ"]})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.Discount?(0,a.jsxs)(h.E,{variant:"destructive",children:[e.Discount,"%"]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)(h.E,{variant:"outline",children:["1_month"===e.duration&&"1 th\xe1ng","3_months"===e.duration&&"3 th\xe1ng","6_months"===e.duration&&"6 th\xe1ng","1_year"===e.duration&&"1 năm"]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:e.stock&&e.stock>0?"text-green-600":"text-red-600",children:e.stock||0})}),(0,a.jsx)("td",{className:"py-3 px-4",children:new Date(e.createdAt).toLocaleDateString("vi-VN")}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>ee(e),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsxs)(u.Lt,{children:[(0,a.jsx)(u.tv,{asChild:!0,children:(0,a.jsx)(l.$,{variant:"outline",size:"sm",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(u.EO,{children:[(0,a.jsxs)(u.wd,{children:[(0,a.jsx)(u.r7,{children:"X\xe1c nhận x\xf3a"}),(0,a.jsxs)(u.$v,{children:['Bạn c\xf3 chắc chắn muốn x\xf3a t\xe0i khoản "',e.name,'"? H\xe0nh động n\xe0y kh\xf4ng thể ho\xe0n t\xe1c.']})]}),(0,a.jsxs)(u.ck,{children:[(0,a.jsx)(u.Zr,{children:"Hủy"}),(0,a.jsx)(u.Rx,{onClick:()=>Y(e._id),className:"bg-red-500 hover:bg-red-600",children:"X\xf3a"})]})]})]})]})})]},e._id)})})]})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Kh\xf4ng t\xecm thấy t\xe0i khoản n\xe0o"}),(0,a.jsx)(l.$,{onClick:()=>{A(""),E("Tất cả")},variant:"outline",children:"X\xf3a bộ lọc"})]}),F>10&&(0,a.jsxs)("div",{className:"flex justify-center gap-2 mt-8",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===L,children:"Trang trước"}),(0,a.jsxs)("span",{className:"flex items-center px-4 text-sm text-muted-foreground",children:["Trang ",L," / ",Math.ceil(F/10)]}),(0,a.jsx)(l.$,{variant:"outline",onClick:()=>$(e=>e+1),disabled:L>=Math.ceil(F/10),children:"Trang sau"})]})]})]})]}),(0,a.jsx)(p.lG,{open:P,onOpenChange:G,children:(0,a.jsxs)(p.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(p.c7,{children:(0,a.jsx)(p.L3,{children:"Chỉnh sửa t\xe0i khoản"})}),en(!0)]})})]})})]})}},9474:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(5155);s(2115);var i=s(3999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9460,7244,409,5452,6671,9023,3769,7684,1133,8441,1684,7358],()=>t(4409)),_N_E=e.O()}]);