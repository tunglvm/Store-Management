(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1e3],{2057:(i,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>g});var r=t(5155),a=t(2115),n=t(5695),o=t(9886),s=t(8745),c=t(1886),d=t(6671);let l=t(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function u(i){if(!i)return"";if("string"==typeof i)return i.startsWith("http://")||i.startsWith("https://")?i:"".concat(l,"/api/files/").concat(i);let e=i.$oid||i._id||i.id||"";return e?"".concat(l,"/api/files/").concat(e):""}function g(){let[i,e]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0),[g,p]=(0,a.useState)(null),[y,h]=(0,a.useState)(!1),v=(0,n.useParams)(),m=Array.isArray(v.id)?v.id[0]:v.id;return((0,a.useEffect)(()=>{m&&(async()=>{try{l(!0),p(null),h(!1);let d=null,y=!1;try{(d=await c.d3.getBySlug(m)).success&&d.data&&(y=!0)}catch(i){try{(d=await c.d3.getById(m)).success&&d.data&&(y=!0)}catch(i){}}if(!y)try{d=await c.iw.getById(m)}catch(i){}if(d&&d.success&&d.data){var i,t,r,a,n,o,s,g;let l;if(y){let e=d.data;h(!0);let r=Array.isArray(e.imagePreview)?e.imagePreview:[],a=r.length>0?r.map(i=>u(i)).filter(Boolean):[u(e.thumbnailImage)||"/placeholder-h7ony.png"],n="";if(Array.isArray(e.category)&&e.category.length>0){let i=e.category[0],t=function(i){if(!i)return"";if("string"==typeof i)return i;if("object"==typeof i){if("string"==typeof i.$oid)return i.$oid;if("string"==typeof i._id)return i._id;if(i._id&&"object"==typeof i._id&&"string"==typeof i._id.$oid)return i._id.$oid;if("string"==typeof i.id)return i.id}return""}(i);if(t)try{let i=await c.BP.getById(t);i.success&&i.data&&(n=i.data.name||"")}catch(i){}else if(i&&"object"==typeof i&&"string"==typeof i.slug)try{let e=await c.BP.getBySlug(i.slug);e.success&&e.data&&(n=e.data.name||"")}catch(i){}}l={id:e._id,title:e.name,description:Array.isArray(e.description)?e.description[0]||"":e.description||"",fullDescription:Array.isArray(e.description)?e.description.join("<br>"):e.description||"",price:e.discountedPrice||e.price,originalPrice:e.discountPercent>0?e.price:void 0,category:n,images:a,seller:{name:"ZuneF Store",rating:0,totalSales:0,joinDate:"",avatar:""},specifications:{"Ng\xf4n ngữ/Tags":Array.isArray(e.tags)?e.tags.join(", "):"","Lượt tải":"".concat(null!==(i=e.downloadCount)&&void 0!==i?i:0),"Lượt xem":"".concat(null!==(t=e.viewCount)&&void 0!==t?t:0),"Trạng th\xe1i":e.isActive?"Hoạt động":"Kh\xf4ng hoạt động"},tags:Array.isArray(e.tags)?e.tags:[],inStock:!0,stockCount:0,isHot:e.discountPercent>0,policy:Array.isArray(e.policy)?e.policy:[],videoPreview:Array.isArray(e.videoPreview)?e.videoPreview.map(u).filter(Boolean):[],videoTutorial:Array.isArray(e.videoTutorial)?e.videoTutorial.map(u).filter(Boolean):[]};try{c.d3.incrementView(e._id)}catch(i){}}else{let i=d.data,e=i.imagepreview&&i.imagepreview.length>0?i.imagepreview.map(i=>u(i)).filter(Boolean):["/placeholder-h7ony.png"];l={id:i._id,title:i.name,description:(null===(r=i.description)||void 0===r?void 0:r[0])||"Kh\xf4ng c\xf3 m\xf4 tả",fullDescription:(null===(a=i.description)||void 0===a?void 0:a.join("<br>"))||(null===(n=i.description)||void 0===n?void 0:n[0])||"Kh\xf4ng c\xf3 m\xf4 tả chi tiết",price:i.price,originalPrice:i.Discount?Math.round(i.price/(1-i.Discount/100)):void 0,category:(null===(o=i.category)||void 0===o?void 0:o[0])||"Kh\xe1c",images:e,seller:{name:"ZuneF Store",rating:4.8,totalSales:100,joinDate:"2023-01-01",avatar:"/seller-avatar-1.png"},specifications:{"Danh mục":(null===(s=i.category)||void 0===s?void 0:s.join(", "))||"N/A","Thời hạn":i.duration||"N/A","Kho h\xe0ng":(null===(g=i.stock)||void 0===g?void 0:g.toString())||"0"},tags:i.category||[],inStock:i.stock>0,stockCount:i.stock||0,isHot:i.Discount&&i.Discount>0,videoPreview:Array.isArray(i.videopreview)?i.videopreview.map(i=>u(i)).filter(Boolean):[],videoTutorial:[]}}e(l)}else p("Sản phẩm kh\xf4ng tồn tại")}catch(i){p("Kh\xf4ng thể tải th\xf4ng tin sản phẩm"),d.oR.error("Kh\xf4ng thể tải th\xf4ng tin sản phẩm")}finally{l(!1)}})()},[m]),t)?(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsx)("div",{className:"h-64 bg-gray-200 rounded mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})})}):((g||!i)&&(0,n.notFound)(),(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)(o.J,{product:i,hideMeta:y}),(0,r.jsx)(s.i,{currentProductId:i.id,category:i.category,useSourceCodeApi:y})]})}))}},3810:(i,e,t)=>{Promise.resolve().then(t.bind(t,2057))}},i=>{var e=e=>i(i.s=e);i.O(0,[9460,7244,6671,64,1167,2355,4676,8441,1684,7358],()=>e(3810)),_N_E=i.O()}]);