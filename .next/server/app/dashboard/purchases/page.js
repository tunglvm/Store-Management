(()=>{var e={};e.id=330,e.ids=[330],e.modules={2497:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>r.a,__next_app__:()=>h,pages:()=>o,routeModule:()=>m,tree:()=>c});var n=a(65239),t=a(48088),i=a(88170),r=a.n(i),l=a(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c={children:["",{children:["dashboard",{children:["purchases",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,37097)),"/workspaces/Store-Management/app/dashboard/purchases/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,62998)),"/workspaces/Store-Management/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/workspaces/Store-Management/app/dashboard/purchases/page.tsx"],h={require:a,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/dashboard/purchases/page",pathname:"/dashboard/purchases",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7965:(e,s,a)=>{"use strict";a.d(s,{w:()=>o});var n=a(60687),t=a(43210),i=a(14163),r="horizontal",l=["horizontal","vertical"],d=t.forwardRef((e,s)=>{var a;let{decorative:t,orientation:d=r,...c}=e,o=(a=d,l.includes(a))?d:r;return(0,n.jsx)(i.sG.div,{"data-orientation":o,...t?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...c,ref:s})});d.displayName="Separator";var c=a(96241);function o({className:e,orientation:s="horizontal",decorative:a=!0,...t}){return(0,n.jsx)(d,{"data-slot":"separator",decorative:a,orientation:s,className:(0,c.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...t})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19959:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});let n=(0,a(62688).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30882:(e,s,a)=>{Promise.resolve().then(a.bind(a,95525))},33873:e=>{"use strict";e.exports=require("path")},37097:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});let n=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/Store-Management/app/dashboard/purchases/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/Store-Management/app/dashboard/purchases/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70615:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});let n=(0,a(62688).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},78122:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});let n=(0,a(62688).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},90714:(e,s,a)=>{Promise.resolve().then(a.bind(a,37097))},95525:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var n=a(60687),t=a(43210),i=a(24934),r=a(55192),l=a(59821),d=a(85910),c=a(68988),o=a(39390),h=a(19959),m=a(70615),x=a(41550),u=a(31158),j=a(71057),p=a(52581),g=a(9577),f=a(24302),N=a(59556),v=a(57769),y=a(37826),w=a(51563),b=a(93613),k=a(5336),A=a(48730),C=a(78122);function S({isOpen:e,onClose:s,orderId:a,productName:d}){let[c,o]=(0,t.useState)(null),[h,m]=(0,t.useState)(!1),[x,j]=(0,t.useState)(!1),[g,f]=(0,t.useState)(null),[S,I]=(0,t.useState)(0),T=async()=>{try{m(!0),f(null);let e=localStorage.getItem("token");if(!e){f("Vui l\xf2ng đăng nhập để tải xuống");return}let s=await fetch(`${N.JR}/api/download/info/${a}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Kh\xf4ng thể tải th\xf4ng tin tải xuống")}let n=await s.json();o(n.data)}catch(e){console.error("Error fetching download info:",e),f(e.message||"C\xf3 lỗi xảy ra khi tải dữ liệu")}finally{m(!1)}},R=async()=>{if(!c||!c.canDownload){p.oR.error("Kh\xf4ng thể tải xuống file n\xe0y");return}try{j(!0),I(0);let e=localStorage.getItem("token");if(!e){p.oR.error("Vui l\xf2ng đăng nhập để tải xuống");return}let s=await fetch(`${N.JR}/api/download/source-code/${a}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Kh\xf4ng thể tải xuống file")}let n=s.headers.get("content-disposition"),t=c.fileName;if(n){let e=n.match(/filename="?([^"]+)"?/);e&&(t=e[1])}let i=await s.blob(),r=window.URL.createObjectURL(i),l=document.createElement("a");l.href=r,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r),p.oR.success("Tải xuống th\xe0nh c\xf4ng!"),setTimeout(()=>{T()},1e3)}catch(e){console.error("Error downloading file:",e),p.oR.error(e.message||"C\xf3 lỗi xảy ra khi tải xuống")}finally{j(!1),I(0)}};return(0,n.jsx)(y.lG,{open:e,onOpenChange:s,children:(0,n.jsxs)(y.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,n.jsx)(y.c7,{children:(0,n.jsxs)(y.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(w.A,{className:"h-5 w-5"}),"Tải xuống Source Code"]})}),h?(0,n.jsxs)(r.Zp,{className:"animate-pulse",children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,n.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})]}):g?(0,n.jsx)(r.Zp,{children:(0,n.jsx)(r.Wu,{className:"text-center py-12",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"h-6 w-6 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Lỗi tải dữ liệu"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:g})]}),(0,n.jsx)(i.$,{onClick:T,children:"Thử lại"})]})})}):c?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(w.A,{className:"h-5 w-5"}),d]}),(0,n.jsxs)(r.BT,{children:["M\xe3 đơn h\xe0ng: ",a]})]}),(0,n.jsx)(l.E,{variant:c.canDownload?"default":"secondary",className:"flex items-center gap-1",children:c.canDownload?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.A,{className:"h-3 w-3"})," C\xf3 thể tải xuống"]}):c.isExpired?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{className:"h-3 w-3"})," Đ\xe3 hết hạn"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.A,{className:"h-3 w-3"})," Hết lượt tải"]})})]})}),(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"T\xean file"}),(0,n.jsx)("p",{className:"font-medium",children:c.fileName})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"K\xedch thước"}),(0,n.jsx)("p",{className:"font-medium",children:c.fileSize})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hết hạn"}),(0,n.jsx)("p",{className:"font-medium",children:new Date(c.expiresAt).toLocaleString("vi-VN")})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{children:"Lượt tải đ\xe3 sử dụng"}),(0,n.jsxs)("span",{children:[c.downloadCount," / ",c.maxDownloads]})]}),(0,n.jsx)(v.k,{value:c.downloadCount/c.maxDownloads*100,className:"h-2"}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["C\xf2n lại ",c?Math.max(0,c.maxDownloads-c.downloadCount):0," lượt tải xuống"]})]}),x&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{children:"Đang tải xuống..."}),(0,n.jsxs)("span",{children:[S,"%"]})]}),(0,n.jsx)(v.k,{value:S,className:"h-2"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(i.$,{onClick:R,disabled:!c.canDownload||x,className:"flex-1",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),x?"Đang tải xuống...":"Tải xuống"]}),(0,n.jsx)(i.$,{variant:"outline",onClick:T,disabled:x,children:(0,n.jsx)(C.A,{className:"h-4 w-4"})})]})]})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsx)(r.ZB,{children:"Hướng dẫn tải xuống"})}),(0,n.jsxs)(r.Wu,{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"1"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Kiểm tra th\xf4ng tin"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Đảm bảo bạn c\xf3 đủ lượt tải v\xe0 file chưa hết hạn"})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"2"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Nhấn tải xuống"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"File sẽ được tải về m\xe1y t\xednh của bạn"})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Giải n\xe9n v\xe0 sử dụng"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Giải n\xe9n file .zip/.rar v\xe0 l\xe0m theo hướng dẫn b\xean trong"})]})]})]})]})]}):(0,n.jsx)(r.Zp,{children:(0,n.jsx)(r.Wu,{className:"text-center py-12",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"h-6 w-6 text-yellow-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Kh\xf4ng t\xecm thấy th\xf4ng tin tải xuống cho sản phẩm n\xe0y."})]}),(0,n.jsx)(i.$,{onClick:T,children:"Thử lại"})]})})})]})})}var I=a(7965),T=a(58869),R=a(99891);function $({isOpen:e,onClose:s,orderId:a,productName:d}){let[h,x]=(0,t.useState)(null),[u,j]=(0,t.useState)(!1),[g,f]=(0,t.useState)(null),[v,w]=(0,t.useState)(!1),S=async()=>{try{j(!0),f(null);let e=localStorage.getItem("token");if(!e){f("Vui l\xf2ng đăng nhập để xem th\xf4ng tin t\xe0i khoản");return}let s=await fetch(`${N.JR}/api/account-info/${a}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),n=await s.json();if(202===s.status)x({orderId:n.data.orderId,productId:"",productName:n.data.productName,username:"",password:"",email:"",additionalInfo:"",isReady:!1,deliveredAt:void 0,expiresAt:void 0});else if(s.ok)x({orderId:n.data.orderId,productId:n.data.productId||"",productName:n.data.productName,username:n.data.loginInfo?.username||"",password:n.data.loginInfo?.password||"",email:n.data.loginInfo?.email||"",additionalInfo:n.data.loginInfo?.additionalInfo||"",isReady:!0,deliveredAt:n.data.deliveredAt,expiresAt:n.data.expiresAt});else throw Error(n.message||"Kh\xf4ng thể tải th\xf4ng tin t\xe0i khoản")}catch(e){console.error("Error fetching account info:",e),f(e.message||"C\xf3 lỗi xảy ra khi tải dữ liệu")}finally{j(!1)}},$=async()=>{if(a)try{w(!0);let e=localStorage.getItem("token");if(!e){p.oR.error("Vui l\xf2ng đăng nhập để kiểm tra trạng th\xe1i");return}let s=await fetch(`${N.JR}/api/account-info/status/${a}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.message||"Kh\xf4ng thể kiểm tra trạng th\xe1i")}(await s.json()).data.isReady?(p.oR.success("T\xe0i khoản đ\xe3 sẵn s\xe0ng!"),S()):p.oR.info("T\xe0i khoản đang được chuẩn bị, vui l\xf2ng chờ...")}catch(e){console.error("Error checking account status:",e),p.oR.error(e.message||"C\xf3 lỗi xảy ra khi kiểm tra trạng th\xe1i")}finally{w(!1)}},E=async(e,s)=>{try{await navigator.clipboard.writeText(e),p.oR.success(`Đ\xe3 sao ch\xe9p ${s}`)}catch(e){console.error("Failed to copy:",e),p.oR.error("Kh\xf4ng thể sao ch\xe9p")}},z=e=>new Date(e).toLocaleString("vi-VN");return(0,n.jsx)(y.lG,{open:e,onOpenChange:s,children:(0,n.jsxs)(y.Cf,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,n.jsx)(y.c7,{children:(0,n.jsxs)(y.L3,{className:"flex items-center gap-2",children:[(0,n.jsx)(T.A,{className:"h-5 w-5"}),"Th\xf4ng tin đăng nhập t\xe0i khoản"]})}),u?(0,n.jsxs)(r.Zp,{className:"animate-pulse",children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"}),(0,n.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})]}):g?(0,n.jsx)(r.Zp,{children:(0,n.jsx)(r.Wu,{className:"text-center py-12",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"h-6 w-6 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Lỗi tải dữ liệu"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:g})]}),(0,n.jsx)(i.$,{onClick:S,children:"Thử lại"})]})})}):h?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(T.A,{className:"h-5 w-5"}),d]}),(0,n.jsxs)(r.BT,{children:["M\xe3 đơn h\xe0ng: ",a]})]}),(0,n.jsx)(l.E,{variant:h.isReady?"default":"secondary",className:"flex items-center gap-1",children:h.isReady?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.A,{className:"h-3 w-3"})," Sẵn s\xe0ng"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.A,{className:"h-3 w-3"})," Đang chuẩn bị"]})})]})}),h.isReady?(0,n.jsxs)(r.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(R.A,{className:"h-4 w-4"}),(0,n.jsx)("h4",{className:"font-semibold",children:"Th\xf4ng tin đăng nhập"})]}),(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{htmlFor:"username",children:"T\xean đăng nhập"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{id:"username",value:h.username||"Chưa c\xf3 th\xf4ng tin",readOnly:!0,className:"flex-1"}),(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(h.username,"t\xean đăng nhập"),disabled:!h.username,children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{htmlFor:"password",children:"Mật khẩu"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{id:"password",type:"password",value:h.password||"Chưa c\xf3 th\xf4ng tin",readOnly:!0,className:"flex-1"}),(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(h.password,"mật khẩu"),disabled:!h.password,children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{id:"email",value:h.email||"Chưa c\xf3 th\xf4ng tin",readOnly:!0,className:"flex-1"}),(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(h.email,"email"),disabled:!h.email,children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]}),h.additionalInfo&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{htmlFor:"additional",children:"Th\xf4ng tin bổ sung"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{id:"additional",value:h.additionalInfo,readOnly:!0,className:"flex-1"}),(0,n.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>E(h.additionalInfo,"th\xf4ng tin bổ sung"),children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]})]})]}),(0,n.jsx)(I.w,{}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[h.deliveredAt&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Ng\xe0y giao"}),(0,n.jsx)("p",{className:"font-medium",children:z(h.deliveredAt)})]}),h.expiresAt&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-muted-foreground",children:"Hết hạn"}),(0,n.jsx)("p",{className:"font-medium",children:z(h.expiresAt)})]})]}),(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsxs)(i.$,{variant:"outline",onClick:$,disabled:v,className:"flex-1",children:[(0,n.jsx)(C.A,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),v?"Đang kiểm tra...":"Kiểm tra trạng th\xe1i"]})})]}):(0,n.jsx)(r.Wu,{className:"text-center py-8",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(A.A,{className:"h-6 w-6 text-yellow-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Đang chuẩn bị t\xe0i khoản"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Admin đang chuẩn bị th\xf4ng tin đăng nhập cho bạn. Vui l\xf2ng chờ trong gi\xe2y l\xe1t."})]}),(0,n.jsxs)(i.$,{onClick:$,disabled:v,children:[(0,n.jsx)(C.A,{className:`h-4 w-4 mr-2 ${v?"animate-spin":""}`}),v?"Đang kiểm tra...":"Kiểm tra lại"]})]})})]}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsx)(r.aR,{children:(0,n.jsx)(r.ZB,{children:"Hướng dẫn sử dụng"})}),(0,n.jsxs)(r.Wu,{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"1"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Sao ch\xe9p th\xf4ng tin"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nhấn n\xfat sao ch\xe9p để lưu th\xf4ng tin đăng nhập"})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"2"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Đăng nhập t\xe0i khoản"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sử dụng th\xf4ng tin n\xe0y để đăng nhập v\xe0o dịch vụ"})]})]}),(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"w-6 h-6 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-medium mt-0.5",children:"3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:"Bảo mật th\xf4ng tin"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Kh\xf4ng chia sẻ th\xf4ng tin đăng nhập với người kh\xe1c"})]})]})]})]})]}):(0,n.jsx)(r.Zp,{children:(0,n.jsx)(r.Wu,{className:"text-center py-12",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(b.A,{className:"h-6 w-6 text-yellow-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Kh\xf4ng c\xf3 th\xf4ng tin"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Kh\xf4ng t\xecm thấy th\xf4ng tin t\xe0i khoản cho sản phẩm n\xe0y. Admin c\xf3 thể chưa cung cấp th\xf4ng tin đăng nhập."})]}),(0,n.jsx)(i.$,{onClick:S,children:"Thử lại"})]})})})]})})}function E(){let{isCollapsed:e}=(0,f.c)(),[s,a]=(0,t.useState)(null),[N,v]=(0,t.useState)([]),[y,w]=(0,t.useState)(!0),[b,k]=(0,t.useState)(null),[A,C]=(0,t.useState)(0),[I,T]=(0,t.useState)(!1),[R,E]=(0,t.useState)(!1),[z,M]=(0,t.useState)(""),[J,L]=(0,t.useState)(""),Z=e=>{navigator.clipboard.writeText(e),p.oR.success("Đ\xe3 sao ch\xe9p v\xe0o clipboard!")},K=e=>(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(o.J,{className:"flex items-center gap-2",children:[(0,n.jsx)(h.A,{className:"h-4 w-4"}),"M\xe3 giao dịch"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{value:e.transactionCode||"N/A",readOnly:!0}),(0,n.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>Z(e.transactionCode||""),children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(o.J,{className:"flex items-center gap-2",children:[(0,n.jsx)(x.A,{className:"h-4 w-4"}),"M\xe3 đơn h\xe0ng"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(c.p,{value:e.orderId||"N/A",readOnly:!0}),(0,n.jsx)(i.$,{size:"sm",variant:"outline",onClick:()=>Z(e.orderId||""),children:(0,n.jsx)(m.A,{className:"h-4 w-4"})})]})]})]}),e.items&&e.items.length>0&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"Sản phẩm đ\xe3 mua"}),(0,n.jsx)("div",{className:"space-y-2",children:e.items.map((s,a)=>(0,n.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-medium",children:s.title||s.name||"Sản phẩm"}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Số lượng: ",s.quantity||1]}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Loại: ","source-code"===s.productType?"Source Code":"T\xe0i khoản"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("p",{className:"font-semibold",children:[(s.price||0).toLocaleString("vi-VN"),"đ"]}),"source-code"===s.productType?(0,n.jsxs)(i.$,{size:"sm",onClick:()=>{M(e.orderId),L(s.title||s.name||"Source Code"),T(!0)},children:[(0,n.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Tải xuống"]}):(0,n.jsxs)(i.$,{size:"sm",onClick:()=>{M(e.orderId),L(s.title||s.name||"T\xe0i khoản"),E(!0)},children:[(0,n.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"Lấy th\xf4ng tin"]})]})]})},a))})]}),e.bankInfo&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(o.J,{children:"Th\xf4ng tin thanh to\xe1n"}),(0,n.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("strong",{children:"Ng\xe2n h\xe0ng:"})," ",e.bankInfo.bankName||"N/A"]}),(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("strong",{children:"Số t\xe0i khoản:"})," ",e.bankInfo.accountNumber||"N/A"]}),(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("strong",{children:"Chủ t\xe0i khoản:"})," ",e.bankInfo.accountName||e.customerInfo?.fullName||e.customerInfo?.name||"N/A"]})]})]})]});return(0,n.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,n.jsx)(g.DashboardSidebar,{}),(0,n.jsx)("div",{className:`flex-1 transition-all duration-300 ${e?"lg:pl-16":"lg:pl-64"}`,children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Đơn h\xe0ng đ\xe3 mua"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:"Quản l\xfd v\xe0 truy cập c\xe1c sản phẩm đ\xe3 mua"})]}),y?(0,n.jsx)("div",{className:"grid gap-6",children:[1,2,3].map(e=>(0,n.jsxs)(r.Zp,{className:"overflow-hidden animate-pulse",children:[(0,n.jsx)(r.aR,{className:"pb-4",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"h-6 bg-gray-200 rounded w-20"}),(0,n.jsx)("div",{className:"h-5 bg-gray-200 rounded w-16"})]})]})}),(0,n.jsx)(r.Wu,{children:(0,n.jsx)("div",{className:"h-32 bg-gray-200 rounded"})})]},e))}):b?(0,n.jsx)(r.Zp,{className:"text-center py-12",children:(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(j.A,{className:"h-6 w-6 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Lỗi tải dữ liệu"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:b})]}),(0,n.jsx)(i.$,{onClick:()=>window.location.reload(),children:"Thử lại"})]})})}):(0,n.jsx)("div",{className:"grid gap-6",children:N.map(e=>(0,n.jsxs)(r.Zp,{className:"overflow-hidden",children:[(0,n.jsx)(r.aR,{className:"pb-4",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(r.ZB,{className:"text-xl",children:e.name}),(0,n.jsxs)(r.BT,{children:["Mua ng\xe0y ",new Date(e.purchaseDate).toLocaleDateString("vi-VN")," • ",e.category]})]}),(0,n.jsxs)("div",{className:"text-right space-y-2",children:[(0,n.jsx)(l.E,{variant:"active"===e.status?"default":"secondary",children:"active"===e.status?"Đang hoạt động":"Ho\xe0n th\xe0nh"}),(0,n.jsxs)("p",{className:"text-lg font-semibold",children:[e.price.toLocaleString("vi-VN"),"đ"]})]})]})}),(0,n.jsx)(r.Wu,{children:(0,n.jsxs)(d.tU,{defaultValue:"access",className:"w-full",children:[(0,n.jsx)(d.j7,{className:"grid w-full grid-cols-2",children:(0,n.jsx)(d.Xi,{value:"info",children:"Th\xf4ng tin đơn h\xe0ng"})}),(0,n.jsx)(d.av,{value:"access",className:"mt-4",children:K(e)}),(0,n.jsxs)(d.av,{value:"info",className:"mt-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"M\xe3 đơn h\xe0ng"}),(0,n.jsx)("p",{className:"font-medium",children:e.orderId||`#${e.id}`})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"M\xe3 giao dịch"}),(0,n.jsx)("p",{className:"font-medium",children:e.transactionCode||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Trạng th\xe1i thanh to\xe1n"}),(0,n.jsx)("p",{className:"font-medium",children:"completed"===e.status?"Đ\xe3 thanh to\xe1n":"pending"===e.status?"Đang chờ":"failed"===e.status?"Thất bại":e.status})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Tổng tiền"}),(0,n.jsxs)("p",{className:"font-medium text-lg",children:[e.price.toLocaleString("vi-VN"),"đ"]})]})]}),e.customerInfo&&(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsx)(o.J,{className:"text-muted-foreground mb-2 block",children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,n.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Họ t\xean"}),(0,n.jsx)("p",{className:"font-medium",children:e.customerInfo.name||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Email"}),(0,n.jsx)("p",{className:"font-medium",children:e.customerInfo.email||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Số điện thoại"}),(0,n.jsx)("p",{className:"font-medium",children:e.customerInfo.phone||"N/A"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(o.J,{className:"text-muted-foreground",children:"Địa chỉ"}),(0,n.jsx)("p",{className:"font-medium",children:e.customerInfo.address||"N/A"})]})]})})]})]})]})})]},e.id))}),0===N.length&&(0,n.jsx)(r.Zp,{className:"text-center py-12",children:(0,n.jsx)(r.Wu,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"mx-auto w-12 h-12 bg-muted rounded-full flex items-center justify-center",children:(0,n.jsx)(j.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Chưa c\xf3 đơn h\xe0ng n\xe0o"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Bạn chưa mua sản phẩm n\xe0o. H\xe3y kh\xe1m ph\xe1 cửa h\xe0ng để t\xecm sản phẩm ph\xf9 hợp!"})]}),(0,n.jsx)(i.$,{asChild:!0,children:(0,n.jsx)("a",{href:"/",children:"Kh\xe1m ph\xe1 sản phẩm"})})]})})})]})}),(0,n.jsx)(S,{isOpen:I,onClose:()=>T(!1),orderId:z,productName:J}),(0,n.jsx)($,{isOpen:R,onClose:()=>E(!1),orderId:z,productName:J})]})}}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),n=s.X(0,[624,244,425],()=>a(2497));module.exports=n})();